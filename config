#######################
# config starts here: #
#######################

font pango: Noto Sans Regular 10

# set the mod key to the winkey:
set $mod Mod4

#####################
# workspace layout: #
#####################

# default i3 tiling mode:
workspace_layout default

##############################
# extra options for windows: #
##############################

#border indicator on windows:
default_border pixel 4
smart_borders on
# border_radius 10

hide_edge_borders both

# Set inner/outer gaps
gaps inner 12
gaps outer 0

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

###############
# Keybidings: #
###############

# Variables:
set $center				move position center

set $saved_full			maim "/home/$USER/Picture/$(date +"%Y-%m-%d_%H-%M-%S")-screenshot.png" && notify-send "Screenshot saved to ~/Picture/$(date +"%Y-%m-%d_%H-%M-%S")-screenshot.png"
set $saved_select		maim --select "/home/$USER/Pictures/$(date +"%Y-%m-%d_%H-%M-%S")-screenshot.png" && notify-send "Screenshot saved to ~/Picture/$(date +"%Y-%m-%d_%H-%M-%S")-screenshot.png"
set $copied_full		maim | xclip -selection clipboard -t image/png && notify-send "Screenshot copied to clipboard"
set $copied_select		maim --select | xclip -selection clipboard -t image/png && notify-send "Screenshot copied to clipboard"

set $udiskie			UDISKIE_DMENU_LAUNCHER="rofi" udiskie-dmenu -matching regex -dmenu -i -no-custom -multi-select
set $calendar			bash ~/.local/share/naivecalendar/naivecalendar.sh

mode "main" {
	set $semi			semicolon

	bindsym e 			exec ~/.config/i3/scripts/powermenu;	mode "default"
	bindsym space		floating toggle; $center;				mode "default"
	bindsym	Shift+f		fullscreen toggle;						mode "default"

	bindsym p 			mode "power"
	bindsym o 			mode "open"
	bindsym r 			mode "resize"
	bindsym f 			mode "focus"
	bindsym m 			mode "move"
	bindsym n			mode "notify"
	bindsym w 			mode "workspace"
	bindsym h			mode "headp"
	bindsym i			mode "i3"
	bindsym l			mode "layout"
	bindsym s			mode "screenshot"
	bindsym Shift+$semi	mode ":"

	bindsym Shift+c 	kill;									mode "default"

	bindsym BackSpace	mode "default"
	bindsym Return 		mode "default"
	bindsym Escape 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "layout" {
	bindsym d			layout default;							mode "default"
	bindsym s			layout stacking;						mode "default"
	bindsym t			layout tabbed;							mode "default"

	bindsym BackSpace	mode "main"
	bindsym Return		mode "default"
	bindsym Escape		mode "default"
	bindsym Control+g	mode "default"
}

mode "i3" {
	bindsym r			reload
	bindsym Shift+r		restart

	bindsym BackSpace	mode "main"
	bindsym Return		mode "default"
	bindsym Escape		mode "default"
	bindsym Control+g	mode "default"
}

mode "power" {
	bindsym s 			exec systemctl suspend;					mode "default"
	bindsym Shift+h 	exec systemctl hibernate;				mode "default"
	bindsym Shift+r 	exec systemctl reboot;					mode "default"
	bindsym Shift+s 	exec systemctl poweroff;				mode "default"
	bindsym l 			exec betterlockscreen -l;				mode "default"

	bindsym BackSpace	mode "main"
	bindsym Return 		mode "default"
	bindsym Escape 		mode "default"
	bindsym Control+g	mode "default"
}

mode ":" {
	bindsym q			mode ":q"
	bindsym w			mode ":w"

	bindsym BackSpace	mode "main"
	bindsym Return 		mode "default"
	bindsym Escape 		mode "default"
	bindsym Control+g	mode "default"
}

mode ":q" {
	bindsym Return		exec systemctl reboot;					mode "default"

	bindsym BackSpace	mode ":"
	bindsym Escape 		mode "default"
	bindsym Control+g	mode "default"
}

mode ":w" {
	bindsym Return		exec systemctl hibernate;				mode "default"

	bindsym BackSpace	mode ":"
	bindsym Escape 		mode "default"
	bindsym Control+g	mode "default"
}

mode "notify" {
	bindsym o			exec dunstctl history-pop
	bindsym c			exec dunstctl close
	bindsym Shift+c		exec dunstctl close-all

	bindsym BackSpace	mode "main"
	bindsym Return 		mode "default"
    bindsym Escape 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "resize" {
	bindsym h 			resize shrink 							width 	10 px
	bindsym j 			resize grow 							height	10 px
	bindsym k 			resize shrink 							height 	10 px
	bindsym l 			resize grow 							width	10 px

	bindsym Shift+h 	resize shrink 							width 	1 px
	bindsym Shift+j 	resize grow 							height	1 px
	bindsym Shift+k 	resize shrink 							height 	1 px
	bindsym Shift+l 	resize grow 							width 	1 px

	bindsym Control+h 	resize shrink 							width 	50 px
	bindsym Control+j 	resize grow 							height	50 px
	bindsym Control+k 	resize shrink 							height 	50 px
	bindsym Control+l 	resize grow 							width 	50 px

	bindsym o			mode "open"
	bindsym m			mode "move"
	bindsym f			mode "focus"
	bindsym w			mode "workspace"

	bindsym Shift+c 	kill

	bindsym BackSpace	mode "main"
	bindsym Return 		mode "default"
    bindsym Escape 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "move" {
	bindsym h 			move left
	bindsym j 			move down
	bindsym k 			move up
	bindsym l 			move right

	bindsym o			mode "open"
	bindsym f			mode "focus"
	bindsym w			mode "workspace"
	bindsym r			mode "resize"

	bindsym Shift+c 	kill

	bindsym BackSpace	mode "main"
	bindsym Return 		mode "default"
	bindsym Escape 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "workspace" {
	set $mv 			move container to workspace

	bindsym Tab 		workspace 								next
	bindsym Shift+Tab 	workspace 								prev

	bindsym l 			workspace 								next
	bindsym h 			workspace 								prev

	bindsym 1 			workspace 								$ws1
	bindsym 2 			workspace 								$ws2
	bindsym 3 			workspace 								$ws3
	bindsym 4 			workspace 								$ws4
	bindsym 5 			workspace 								$ws5
	bindsym 6 			workspace 								$ws6
	bindsym 7 			workspace 								$ws7
	bindsym 8 			workspace 								$ws8
	bindsym 9 			workspace 								$ws9
	bindsym 0 			workspace 								$ws10

	bindsym Shift+1 	$mv										$ws1
	bindsym Shift+2 	$mv										$ws2
	bindsym Shift+3 	$mv										$ws3
	bindsym Shift+4 	$mv										$ws4
	bindsym Shift+5 	$mv										$ws5
	bindsym Shift+6 	$mv										$ws6
	bindsym Shift+7 	$mv										$ws7
	bindsym Shift+8 	$mv										$ws8
	bindsym Shift+9 	$mv										$ws9
	bindsym Shift+0 	$mv										$ws10

	bindsym o			mode "open"
	bindsym m			mode "move"
	bindsym f			mode "focus"
	bindsym r			mode "resize"

	bindsym t 			exec rofi -show window;					mode "default"

	bindsym Shift+c 	kill

	bindsym BackSpace	mode "main"
	bindsym Escape 		mode "default"
	bindsym Return 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "focus" {
	bindsym h 			focus left
	bindsym j 			focus down
	bindsym k 			focus up
	bindsym l 			focus right

	bindsym o 			mode "open"
	bindsym m			mode "move"
	bindsym w			mode "workspace"
	bindsym r			mode "resize"

	bindsym Shift+c 	kill

	bindsym BackSpace	mode "main"
	bindsym Return 		mode "default"
	bindsym Escape 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "rofi" {
	bindsym d			exec rofi -modi drun -show drun;		mode "default"
	bindsym p 			exec $udiskie;							mode "default"
	bindsym c 			exec rofi -show calc;					mode "default"
	bindsym Shift+c 	exec $calendar;							mode "default"

	bindsym BackSpace	mode "open"
	bindsym Return 		mode "default"
	bindsym Escape 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "open" {
	bindsym w 			exec /usr/bin/firefox;					mode "default"
	bindsym e 			exec /sbin/emacsclient -c -a "emacs";	mode "default"
	bindsym t 			exec alacritty; mode "default";			mode "default"

	bindsym r			mode "rofi"

	bindsym d			exec rofi -modi drun -show drun;		mode "default"

	bindsym s 			split h; 								mode "right"
	bindsym v 			split v; 								mode "bottom"

	bindsym Shift+c 	kill;									mode "default"

	bindsym BackSpace	mode "main"
	bindsym Return 		mode "default"
	bindsym Escape 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "bottom" {
	bindsym w 			exec /usr/bin/firefox;					mode "default"
	bindsym e 			exec /sbin/emacsclient -c -a "emacs";	mode "default"
	bindsym t 			exec alacritty; mode "default";			mode "default"

	bindsym d			exec rofi -modi drun -show drun;		mode "default"

	bindsym s			split h;								mode "right"

	bindsym Shift+c 	kill;									mode "default"

	bindsym BackSpace	mode "main"
	bindsym Escape 		mode "default"
	bindsym Return 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "right" {
	bindsym w 			exec /usr/bin/firefox;					mode "default"
	bindsym e 			exec /sbin/emacsclient -c -a "emacs";	mode "default"
	bindsym t 			exec alacritty; mode "default";			mode "default"

	bindsym d			exec rofi -modi drun -show drun;		mode "default"

	bindsym	v			split v;								mode "bottom"

	bindsym Shift+c 	kill;									mode "default"

	bindsym BackSpace	mode "main"
	bindsym Escape 		mode "default"
	bindsym Return 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "headp" {
	bindsym c			exec headp -c;							mode "default"
	bindsym d			exec headp -d;							mode "default"
	bindsym u			exec headp -u 0;						mode "default"
	bindsym k			exec bash ~/.config/polybar/killer.sh;	mode "default"

	bindsym BackSpace	mode "main"
	bindsym Escape 		mode "default"
	bindsym Return 		mode "default"
	bindsym Control+g 	mode "default"
}

mode "screenshot" {
	bindsym Shift+f		exec $saved_full;						mode "default"
	bindsym Shift+s		exec $saved_select;						mode "default"

	bindsym f			exec $copied_full;						mode "default"
	bindsym s			exec $copied_select;					mode "default"

	bindsym BackSpace	mode "main"
	bindsym Return		mode "default"
	bindsym Escape		mode "default"
	bindsym Control+g	mode "default"
}

# bindsym $mod+space mode "main"
bindsym Super_R mode "main"

# volume
bindsym XF86AudioRaiseVolume exec pamixer -i 5
bindsym XF86AudioLowerVolume exec pamixer -d 5

# gradular volume control
bindsym Shift+XF86AudioRaiseVolume exec pamixer -i 1
bindsym Shift+XF86AudioLowerVolume exec pamixer -d 1

# mute
bindsym XF86AudioMute exec pamixer --toggle-mute

# audio control
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# btop (like task manager)
bindsym Control+Mod1+Delete exec "alacritty --class btop,btop -e btop"

######################################################
# configuration for workspace behaviour and windows: #
######################################################

set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# bind program to workspace and focus to them on startup:
assign [class="Alacritty"] $ws1
assign [class="(?i)firefox"] $ws2
assign [class="Thunar"] $ws3
assign [class="Emacs"] $ws3
assign [class="steam"] $ws4
assign [class="lutris"] $ws4
assign [class="discord"] $ws5
assign [class="WebCord"] $ws5
assign [class="factorio"] $ws6
assign [class="hl_linux"] $ws6
assign [class="hl2_linux"] $ws6
assign [class="FTL.amd64"] $ws6
assign [class="KSP.x86_64"] $ws6
assign [class="minecraft-launcher"] $ws6
assign [class="Minecraft Launcher"] $ws6
assign [class="ftb-app"] $ws6
assign [class="Minecraft"] $ws6
assign [class="Poly Bridge 2.x86_64"] $ws6
assign [class="Starsector 0.95.1a-RC6"] $ws6
assign [class="steam_app_311340"] $ws6 							# Metal gear solid 5 Ground Zeroes
assign [class="steam_app_287700"] $ws6 							# Metal gear solid 5 Phantom Pain
assign [class="steam_app_1328670"] $ws6 						# Mass Effect Legendary Edition
assign [class="steam_app_1182480"] $ws6 						# EA desktop
assign [class="steam_app_1366540"] $ws6 						# Dyson Sphere Program
assign [class="steam_app_954850"] $ws6 							# KSP 2
assign [class="steam_app_606280"] $ws6 							# darksiders 3
assign [class="steam_app_1313140"] $ws6 						# Cult of The Lamb
assign [class="steam_app_548430"] $ws6 							# Deep Rock Galactic
assign [class="steam_app_1604030"] $ws6 						# V rising
assign [class="steam_app_235460"] $ws6 							# Metal Gear Rising: Revengence
assign [class="steam_app_230410"] $ws6 							# Warframe
assign [class="steam_app_1172470"] $ws6 						# Apex Legends
assign [class="steam_app_714070"] $ws6 							# Entropy: Zero
assign [class="Celeste.bin.x86_64"] $ws6
assign [class="riotclientux.exe"] $ws6
assign [class="leagueclientux.exe"] $ws6
assign [class="league of legends.exe"] $ws6
assign [class="Beyond-All-Reason"] $ws6
assign [class="gw2-64.exe"] $ws6
assign [class="battle.net.exe"] $ws6
assign [class="sc2_x64.exe"] $ws6
assign [class="portal2_linux"] $ws6
assign [class="bms_linux"] $ws6
assign [class="elisa"] $ws7
assign [class="vlc"] $ws7
assign [class="YouTube Music"] $ws7
assign [class="Rhythmbox"] $ws7
assign [class="Microsoft Teams - Preview"] $ws8

# automatic set focus new window if it opens on another workspace than the current:
for_window [class=Alacritty] focus
for_window [class=(?i)firefox] focus
for_window [class=Thunar] focus
for_window [class=elisa] focus
for_window [class=vlc] focus
for_window [class=factorio] focus
for_window [class=hl_linux] focus
for_window [class=hl2_linux] focus
for_window [class=FTL.amd64] focus
for_window [class=KSP.x86_64] focus
for_window [class=Rhythmbox] focus
for_window [class=Emacs] focus

# Btop
for_window [class=btop] floating enable
for_window [class=btop] resize set 1280 730
for_window [class=btop] move position center

##############
# compositor #
##############

# picom:
exec_always --no-startup-id picom --config  ~/.config/picom.conf

#############################################
# autostart applications/services on login: #
#############################################

# rofi polkit
exec --no-startup-id rofi-polkit-agent

# num lock activated
exec --no-startup-id numlockx on

# set wallpaper
exec --no-startup-id sleep 1 && feh --bg-fill --no-fehbg --randomize $HOME/Pictures/wallpapers/distrotube-wallpapers

# Desktop notifications
exec --no-startup-id dunst

# Emacs daemon
exec --no-startup-id /sbin/emacs --daemon

# udiskie
exec --no-startup-id udiskie -A

###############
# system tray #
###############
exec --no-startup-id nm-applet
exec --no-startup-id alarm-clock-applet

##################
# floating rules #
##################
for_window [class="Pavucontrol" instance="pavucontrol"] floating enable

######################################
# color settings for bar and windows #
######################################

# Define colors variables:
set $darkbluetrans	        #08052be6
set $darkblue		        #08052b
set $lightblue		        #5294e2
set $urgentred		        #e53935
set $white		            #ffffff
set $black		            #000000
set $purple		            #e345ff
set $darkpurple             #301934
set $darkgrey		        #383c4a
set $grey		            #b0b5bd
set $mediumgrey		        #8b8b8b
set $yellowbrown	        #e1b700
set $fwtxt                  #b315d1

# 3b
set $brink-pink             #FF6189
set $independence           #3D425B
set $ebony-clay             #2b2d3a
set $middle-blue            #78D6F0
set $yellow-green-crayola   #AADD77
set $lavender-floral        #A98AD6
set $pistachio              #9FD173
set $gold-metallic          #DBB85E
# define colors for windows:
#class		        	    border		bground		text		indicator        child_border
client.focused		    	$lightblue	$darkblue	$white		#a98ad6          #78d6f0
client.unfocused	    	$darkblue	$darkblue	$grey		#a98ad6	         #3d425b
client.focused_inactive		$darkblue	$darkblue	$grey		$black		     #3d425b
client.urgent		    	$urgentred	$urgentred	$white		$yellowbrown	 $yellowbrown

################
# bar settings #
################

exec_always --no-startup-id $HOME/.config/polybar/launch.sh
